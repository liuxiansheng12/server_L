(this.webpackJsonpdome=this.webpackJsonpdome||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(5),s=n.n(r),u=n(3),c=(n(11),n(1)),o=n(2);var l=function(e,t,n){return new Promise((function(a,i){var r=new XMLHttpRequest;"POST"==t?(r.open("POST",e,!0),r.send(n)):(r.open("GET",e,!0),r.send()),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&a(r.responseText)}}))},m=function(){function e(t){Object(c.a)(this,e),this.name=t.name,this.money=t.seedMoney,this.crops=t,this.seedImg=t.fruitImgSrc}return Object(o.a)(e,[{key:"plantCrops",value:function(){i.a.sum.emit("plantCrops",this.crops)}}]),e}(),g="http://121.89.202.212:10086",h=function(){function e(t,n,a,i,r,s,u){Object(c.a)(this,e),this.name=t,this.fruitMoney=a,this.seedMoney=i,this.maturityTime=r,this.harvestNum=s,this.stageTime=n,this.stageImgSrc=[],this.harvestFruitNum=u,this.fruitImgSrc=g+"/project/nongChang/img/\u4f5c\u7269/".concat(t,"/").concat(t,"-\u79cd\u5b50.png"),this.witheredImgSrc=g+"/project/nongChang/img/\u4f5c\u7269/".concat(t,"/").concat(t,"-\u7ed3\u675f.png"),this.handleTimeStage(),this.urlIndexes()}return Object(o.a)(e,[{key:"getStage",value:function(e){for(var t=(new Date).getTime(),n=0;n<this.stageTime.length;n++)if(t>=1e3*this.stageTime[n]+e){if(this.stageTime[n+1]&&t<1e3*this.stageTime[n+1]+e)return n;if(!this.stageTime[n+1])return n}}},{key:"handleTimeStage",value:function(){var e=[];this.stageTime.forEach((function(t,n){var a=t.split("-"),i=86400*a[0]+3600*a[1]+60*a[2]+ +a[3];e.push(i)})),this.stageTime=e}},{key:"urlIndexes",value:function(){var e=this;this.stageTime.forEach((function(t,n){0===n?e.stageImgSrc.push(g+"/project/nongChang/img/\u4f5c\u7269/".concat(e.name,"/").concat(e.name,"-\u542f\u52a8.png")):e.stageImgSrc.push(g+"/project/nongChang/img/\u4f5c\u7269/".concat(e.name,"/").concat(e.name,"-").concat(n,".png"))}))}}]),e}(),d=new h("\u8304\u5b50",["0-0-0-0","0-6-8-30","0-9-5-5","0-12-0-26","0-20-2-50","1-9-6-5"],20,8,6e3,8,30),f=new h("\u897f\u74dc",["0-0-0-0","0-3-8-30","0-5-5-5","0-9-0-26","0-15-2-50","0-20-6-5"],200,80,1200,2,6),v=new h("\u6a31\u6843",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5","1-12-6-5"],60,120,18e3,4,20),p=new h("\u767d\u841d\u535c",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50"],60,120,18e3,4,20),y=new h("\u8349\u8393",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),k=new h("\u80e1\u841d\u535c",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50"],60,120,18e3,4,20),E=new h("\u8fa3\u6912",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),S=new h("\u5357\u74dc",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),w=new h("\u571f\u8c46",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),j=new h("\u8c4c\u8c46",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),b=new h("\u897f\u7ea2\u67ff",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),C=new h("\u7389\u7c73",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),N=new h("\u9999\u8549",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),O=new h("\u6843\u5b50",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),A=new h("\u83e0\u841d",["0-0-0-0","0-5-8-30","0-12-5-5","0-16-0-26","0-20-2-50","1-4-6-5"],60,120,18e3,4,20),I=new(function(){function e(){Object(c.a)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];this.cropsAgg=[].concat(n)}return Object(o.a)(e,[{key:"getCrops",value:function(e){for(var t=0;t<this.cropsAgg.length;t++)if(this.cropsAgg[t].name===e)return this.cropsAgg[t]}}]),e}())(d,f,v,p,y,k,E,S,w,j,b,C,N,O,A),T=new(function(){function e(){Object(c.a)(this,e),this.seedAgg=[],this.ajaxGetSeed()}return Object(o.a)(e,[{key:"seedNumPlus",value:function(e,t){if(this.seedTypeJudge(e.name)){var n=this.seedIndex(e.name);this.seedAgg[n].num+=t}else this.seedAgg.push({name:e.name,num:t,seed:e});this.ajaxSetSeed()}},{key:"remove",value:function(e){var t=this.seedIndex(e);this.seedAgg[t].num-=1,0===this.seedAgg[t].num&&this.seedAgg.splice(t,1),this.ajaxSetSeed()}},{key:"seedTypeJudge",value:function(e){for(var t=0;t<this.seedAgg.length;t++)if(this.seedAgg[t].seed.name===e)return!0;return!1}},{key:"seedIndex",value:function(e){for(var t=0;t<this.seedAgg.length;t++)if(this.seedAgg[t].seed.name===e)return t}},{key:"ajaxGetSeed",value:function(){var e=this;l(g+"/nongChang/getSeed?name=liu").then((function(t){var n=JSON.parse(t);if(console.log(n),"ok"===n.type&&"object"===typeof n.data)for(var a=0;a<n.data.length;a++){var i=n.data[a].name,r=n.data[a].num,s=new m(I.getCrops(i));e.seedAgg.push({name:i,num:r,seed:s})}console.log(e.seedAgg)}))}},{key:"ajaxSetSeed",value:function(){var e=JSON.stringify(this.seedAgg),t=JSON.stringify({name:"liu",seed:e});l(g+"/nongChang/setSeed","POST",t)}}]),e}()),x=null,J=new(function(){function e(){Object(c.a)(this,e),this.money=0,this.name="liu",this.ajaxGetMoney()}return Object(o.a)(e,[{key:"getMoney",value:function(){return this.money}},{key:"setMoney",value:function(e){this.money=e,x&&x(e),this.ajaxSetMoney()}},{key:"setMoneyXuan",value:function(e){x=e}},{key:"ajaxGetMoney",value:function(){var e=this;l(g+"/nongChang/getMoney?name=liu").then((function(t){var n=JSON.parse(t);null==n||"no"==n.type||null==n.data?e.money=500:e.money=+n.data,x&&x(e.money)}))}},{key:"ajaxSetMoney",value:function(){var e=this.money,t=JSON.stringify({name:"liu",money:e});l(g+"/nongChang/setMoney","POST",t)}}]),e}()),M=new(function(){function e(){Object(c.a)(this,e),this.house=[],this.ajaxGetMouse()}return Object(o.a)(e,[{key:"addFruit",value:function(e,t){if(this.fruitJudge(e.name)){var n=this.fruitIndex(e.name);this.house[n].num+=t}else this.house.push({name:e.name,num:t,money:e.fruitMoney,fruitImgSrc:e.fruitImgSrc});this.ajaxSetMouse()}},{key:"sellFruit",value:function(e){var t=this.fruitIndex(e),n=this.house[t],a=n.money*n.num;this.house.splice(t,1);var i=J.getMoney();J.setMoney(i+a),this.ajaxSetMouse()}},{key:"fruitJudge",value:function(e){for(var t=this.house,n=0;n<t.length;n++)if(t[n].name===e)return!0;return!1}},{key:"fruitIndex",value:function(e){for(var t=this.house,n=0;n<t.length;n++)if(t[n].name===e)return n}},{key:"ajaxGetMouse",value:function(){var e=this;l(g+"/nongChang/getHouse?name=liu").then((function(t){var n=JSON.parse(t);"ok"===n.type&&"object"===typeof n.data&&(e.house=n.data),console.log(n)}))}},{key:"ajaxSetMouse",value:function(){var e=JSON.stringify(this.house),t=JSON.stringify({name:"liu",house:e});l(g+"/nongChang/setHouse","POST",t)}}]),e}()),L=function(){function e(t,n,a,i,r){Object(c.a)(this,e),this.wettability=4.864,this.plantTime=0,this.cropsAgg=null,this.fruitNum=0,this.fruitTime=0,this.weedIden=!1,this.insecticidalIden=!1,this.currentHarvestNum=0,this.i=t,this.x=n,this.y=a,this.width=i,this.height=r,this.setInterval(),this.ajaxGetLand()}return Object(o.a)(e,[{key:"plantCrops",value:function(e){this.judgeLandContainCrops()||(this.plantTime=(new Date).getTime(),this.cropsAgg=e,T.remove(e.name),this.ajaxSetLand(),alert("\u79cd\u690d\u6210\u529f"))}},{key:"getLandBackImgSrc",value:function(){this.wettability<1&&(this.wettability=1);var e=5-parseInt(this.wettability),t=g+"/project/nongChang/img/\u571f\u5730/\u571f\u5730-".concat(e,".png");return this.weedIden&&(t=g+"/project/nongChang/img/\u571f\u5730/\u571f\u5730-\u8349.png"),t}},{key:"getCropsBackImgSrc",value:function(){if(this.judgeLandContainCrops()){var e=this.cropsAgg.getStage(this.plantTime),t=this.cropsAgg.stageImgSrc[e];return this.witheredJudge()&&(t=this.cropsAgg.witheredImgSrc),t}}},{key:"witheredJudge",value:function(){return this.currentHarvestNum===this.cropsAgg.harvestNum}},{key:"harvestJudge",value:function(){if(!this.judgeLandContainCrops())return!1;if(this.cropsAgg.getStage(this.plantTime)===this.cropsAgg.stageTime.length-1){var e=this.fruitTime+1e3*this.cropsAgg.maturityTime*this.currentHarvestNum;if((new Date).getTime()>=e&&!this.witheredJudge())return!0}return!1}},{key:"weed",value:function(){}},{key:"insecticidal",value:function(){}},{key:"wettabilityGeng",value:function(){if(this.cropsAgg){var e=(new Date).getTime(),t=this.plantTime,n=parseInt((e-t)/1e3);this.wettability-=1e-5*n}}},{key:"watering",value:function(){this.wettability=4.9,this.ajaxSetLand(),alert("\u6d47\u6c34\u6210\u529f")}},{key:"harvest",value:function(){this.currentHarvestNum+=1,this.fruitTime=(new Date).getTime();var e=parseInt(this.cropsAgg.harvestFruitNum*parseInt(this.wettability)/4);M.addFruit(this.cropsAgg,e),this.ajaxSetLand()}},{key:"judgeLandContainCrops",value:function(){return!!this.cropsAgg}},{key:"removeCrops",value:function(){this.plantTime=0,this.cropsAgg=null,this.fruitNum=0,this.fruitTime=0,this.currentHarvestNum=0,this.ajaxSetLand()}},{key:"removeTips",value:function(){return!!this.judgeLandContainCrops()&&!!this.witheredJudge()}},{key:"wettabilityDec",value:function(){}},{key:"getStageClass",value:function(){if(this.judgeLandContainCrops()){var e=this.cropsAgg.getStage(this.plantTime);return 0===e?"qiDong":1===e?"zuoWu-1":2===e?"zuoWu-2":3===e?"zuoWu-3":this.witheredJudge()?"jieShu":""}}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;setInterval((function(){e.wettability-=.001,e.ajaxSetLand()}),1e5)}))},{key:"ajaxGetLand",value:function(){var e=this;l(g+"/nongChang/getLand?name=liu&index=".concat(this.i)).then((function(t){var n=JSON.parse(t);if("ok"===n.type&&"object"===typeof n.data)for(var a in e)n.data[a]&&e.hasOwnProperty(a)&&("cropsAgg"===a?e.cropsAgg=I.getCrops(n.data[a].name):e[a]=n.data[a]);e.wettabilityGeng()}))}},{key:"ajaxSetLand",value:function(){var e=JSON.stringify(this),t=JSON.stringify({name:"liu",index:this.i,land:e});l(g+"/nongChang/setLand","POST",t)}}]),e}(),F=new function e(){Object(c.a)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];this.landAgg=[].concat(n)}(new L(0,40,325,150,76.5),new L(1,128,280,150,76.5),new L(2,217,236,150,76.5),new L(3,145,375,150,76.5),new L(4,233,330,150,76.5),new L(5,322,286,150,76.5),new L(6,255,425,150,76.5),new L(7,343,380,150,76.5),new L(8,432,336,150,76.5),new L(9,360,480,150,76.5),new L(10,448,435,150,76.5),new L(11,537,391,150,76.5),new L(12,468,535,150,76.5),new L(13,556,490,150,76.5),new L(14,645,446,150,76.5));function P(){var e=J.getMoney(),t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],s=n[1];return J.setMoneyXuan(s),i.a.createElement("div",{className:"money"},"\u91d1\u5e01: ",r)}function G(e){var t=e.i,n=e.k,r=n.getCropsBackImgSrc(),s=n.getLandBackImgSrc(),c=n.harvestJudge(),o=Object(a.useState)(r),l=Object(u.a)(o,2),m=l[0],g=l[1],h=Object(a.useState)(s),d=Object(u.a)(h,2),f=d[0],v=d[1],p=Object(a.useState)(c),y=Object(u.a)(p,2),k=y[0],E=y[1];return Object(a.useEffect)((function(){setInterval((function(){var e=n.getCropsBackImgSrc(),t=n.getLandBackImgSrc(),a=n.harvestJudge();g(e),v(t),E(a)}),1e3)}),[]),i.a.createElement("div",{className:"t_".concat(t+1),style:{background:"url(".concat(f,") 0% 0% / 100% 100% no-repeat")},onClick:function(){n.judgeLandContainCrops()||(i.a.sum.emit("setExhibitionBoo","\u79cd\u5b50\u5305\u79cd\u690d"),i.a.sum.on("plantCrops",(function(e){n.plantCrops(e)})))}},i.a.createElement("div",{className:"watering",style:{display:n.wettability<=2?"block":"none"},onClick:function(e){n.watering(),e.stopPropagation()}},"\u6d47\u6c34"),i.a.createElement("div",{className:"insecticidal",style:{display:n.insecticidalIden?"block":"none"}},"\u9664\u866b"),i.a.createElement("div",{className:"harvest",style:{display:k?"block":"none"},onClick:function(){n.harvest()}},"\u6536\u83b7"),i.a.createElement("div",{className:"remove",style:{display:n.removeTips()?"block":"none"},onClick:function(e){n.removeCrops(),e.stopPropagation()}},"\u6458\u9664"),m&&i.a.createElement("img",{className:n.getStageClass(),src:m,alt:""}))}var B=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"land"},i.a.createElement(P,null),F.landAgg.map((function(e,t){return i.a.createElement(G,{k:e,i:t,key:t})}))))};n(12);function H(e){i.a.sum.emit("setExhibitionBoo",e)}var D=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"menu"},i.a.createElement("div",{onClick:H.bind(null,"\u5546\u5e97")},i.a.createElement("img",{src:g+"/project/nongChang/img/\u56fe\u6807/\u5546\u5e97.png",alt:"",prop:""})),i.a.createElement("div",{onClick:H.bind(null,"\u4ed3\u5e93")},i.a.createElement("img",{src:g+"/project/nongChang/img/\u56fe\u6807/\u4ed3\u5e93.png",alt:"",prop:""})),i.a.createElement("div",{onClick:H.bind(null,"\u79cd\u5b50\u5305")},i.a.createElement("img",{src:g+"/project/nongChang/img/\u56fe\u6807/\u79cd\u5b50\u5305.png",alt:"",prop:""}))))},q=(n(13),n(14),new(function(){function e(){Object(c.a)(this,e),this.seedAgg=[],this.createSeed()}return Object(o.a)(e,[{key:"createSeed",value:function(){for(var e=I.cropsAgg,t=0;t<e.length;t++)this.seedAgg.push(new m(e[t]))}},{key:"buySeed",value:function(e,t){var n=J.getMoney(),a=e.money*t;n>a?(T.seedNumPlus(e,t),J.setMoney(n-a),alert("\u8d2d\u4e70\u6210\u529f")):alert("\u91d1\u5e01\u4e0d\u8db3")}},{key:"reedNumIncrease",value:function(e){return 100===(e+=1)&&(e=99),e}},{key:"reedNumReduce",value:function(e){return 0===(e-=1)&&(e=1),e}}]),e}()));function z(e){var t=Object(a.useState)(1),n=Object(u.a)(t,2),r=n[0],s=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,i.a.createElement("div",{className:"img"},i.a.createElement("img",{src:e.k.seedImg,alt:"",prop:""})),i.a.createElement("div",{className:"money"},"\uffe5",e.k.money),i.a.createElement("div",{className:"btn"},i.a.createElement("button",{onClick:function(){q.buySeed(e.k,r)},className:"but"},"\u8d2d\u4e70"),i.a.createElement("div",null,i.a.createElement("span",{onClick:function(){s(q.reedNumReduce(r))},className:"jian"},"-"),i.a.createElement("span",null,r),i.a.createElement("span",{onClick:function(){s(q.reedNumIncrease(r))},className:"jia"},"+")))))}var R=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"shop"},i.a.createElement("ul",null,q.seedAgg.map((function(e,t){return i.a.createElement(z,{k:e,key:t})})))))};n(15);function W(e){var t=e.k;return i.a.createElement("li",null,i.a.createElement("div",{className:"img"},i.a.createElement("img",{src:t.seed.seedImg,alt:"",prop:""})),i.a.createElement("div",{className:"num"},"\u6570\u91cf: ",t.num))}var X=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"seed"},i.a.createElement("ul",null,T.seedAgg.map((function(e,t){return i.a.createElement(W,{k:e,key:t})})))))};n(16);function _(e){var t=e.k;return i.a.createElement("li",null,i.a.createElement("div",{className:"img"},i.a.createElement("img",{src:t.seed.seedImg,alt:"",prop:""})),i.a.createElement("div",{className:"num"},"\u6570\u91cf: ",t.num),i.a.createElement("button",{className:"species",onClick:function(){i.a.sum.emit("setExhibitionBoo","\u79cd\u5b50\u5305\u79cd\u690d"),t.seed.plantCrops()}},"\u79cd\u690d"))}var K=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"seedSpecies"},i.a.createElement("ul",null,T.seedAgg.map((function(e,t){return i.a.createElement(_,{k:e,key:t})})))))};n(17);function Q(e){var t=e.k;return i.a.createElement(i.a.Fragment,null,i.a.createElement("li",{className:"fruit"},i.a.createElement("div",{className:"img"},i.a.createElement("img",{src:t.fruitImgSrc,alt:"",prop:""})),i.a.createElement("div",{className:"num"},"\u6570\u91cf: ",t.num),i.a.createElement("div",{className:"btn"},i.a.createElement("button",{onClick:function(){M.sellFruit(t.name)}},"\u51fa\u552e"),i.a.createElement("span",{className:"money"},"\u5355\u4ef7: \uffe5",t.money))))}var U=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2)[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"house"},i.a.createElement("ul",{onClick:function(){t({})}},M.house.map((function(e,t){return i.a.createElement(Q,{k:e,key:t})})))))};var V=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){i.a.sum.on("setExhibitionBoo",(function(e){r(e===n?"":e)}))}),[n]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement("div",{className:"exhibition"},"\u5546\u5e97"===n&&i.a.createElement(R,null),"\u79cd\u5b50\u5305"===n&&i.a.createElement(X,null),"\u79cd\u5b50\u5305\u79cd\u690d"===n&&i.a.createElement(K,null),"\u4ed3\u5e93"===n&&i.a.createElement(U,null)))};var Y=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(B,null),i.a.createElement(D,null),i.a.createElement(V,null))};i.a.sum=function(){var e={};return{on:function(t,n){e[t]=n},emit:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];e[t]?e[t].apply(e,a):new Error("".concat(t,"\u65b9\u6cd5\u6ca1\u6709\u88ab\u6ce8\u518c"))}}}(),s.a.render(i.a.createElement(Y,null),document.querySelector("#app"))}],[[6,1,2]]]);
//# sourceMappingURL=main.80999f60.chunk.js.map