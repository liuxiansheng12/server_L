{"version":3,"sources":["tool/index.js","component/Search/tool.js","context.js","component/Search/index.js","component/Footer/index.js","component/Singer/tool.js","component/Singer/index.js","component/Information/tool.js","component/Information/index.js","component/Lrc/tool.js","component/Lrc/index.js","component/Frequency/index.js","component/Play/tool.js","component/Play/index.js","App.js","index.js"],"names":["ajax","url","config","Promise","res","rej","xhr","XMLHttpRequest","open","send","responseType","onreadystatechange","readyState","status","data","response","downAjax","value","callBack","tool","then","k","JSON","parse","arr","forEach","e","d","split","length","push","chuLi","context","React","createContext","Search","useState","setValue","down","setDown","downBoo","setDownBoo","contextData","useContext","useEffect","window","onclick","className","onClick","stopPropagation","onChange","target","style","display","map","i","key","console","log","playBoo","setTimeout","singerId","inputKey","forKey","Footer","props","index","zong","footer","setFooter","singerAjax","setFootetZ","setSinger","ref","current","scrollTop","parseInt","total","artistList","Singer","footerI","setFootetI","footerZ","singer","useRef","id","src","pic70","name","informationAjax","setMusicList","list","Information","setSingerId","setInputKey","musicList","musicId","rid","pic","artist","lrcAjax","setLrc","lrclist","styColor","time","t","_t","styTop","Lrc","lrc","getIndex","marginTop","color","lineLyric","touWei","terval","_k","styTou","m","background","bottom","Frequency","document","querySelectorAll","fill","setInterval","w","clearInterval","frequency","a","Math","random","height","musicAjax","setMusicXin","setMusicSrc","musicXin","musicSrc","music","musicUrl","jiaCall","stopCall","boo","audioContext","source","analyser","bufferData","jiaZaiBoo","ajaxMusic","AudioContext","webkitAudioContext","mozAudioContext","msAudioContext","createAudioContext","createBufferSource","createAnalyser","smoothingTimeConstant","fftSize","connect","destination","Uint8Array","frequencyBinCount","decodeAudioData","buffer","play","err","resume","currentTime","start","wei","getByteFrequencyData","duration","stop","suspend","Play","setMusicId","musicBiao","setMusicBiao","musicBoo","setMusicBoo","setTime","setFrequency","getMusicData","getMusic","obj","App","setPlayBoo","Provider","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.9f9f568f.chunk.js","sourcesContent":["\r\nfunction ajax(url, config={}) {\r\n    return new Promise((res, rej) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", url, true);\r\n        xhr.send();\r\n        config.responseType && (xhr.responseType = config.responseType);\r\n        xhr.onreadystatechange = () => {\r\n            if(xhr.readyState === 4 && xhr.status === 200) {\r\n                const data = xhr.response;\r\n                res(data);\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport default {\r\n    ajax,\r\n    // url: \"http://127.0.0.1:10086\"\r\n    url: \"\"\r\n}","import tool from \"../../tool\"\r\n\r\n// 申请下拉列表的数据\r\nfunction downAjax(value, callBack) {\r\n    tool.ajax(tool.url + `/kuwo/api/www/search/searchKey?key=${value}`)\r\n    .then( (k) => {\r\n        const data = JSON.parse(k).data;\r\n        callBack( chuLi(data) );\r\n    } )\r\n}\r\nfunction chuLi(data) {\r\n    const arr = [];\r\n    data.forEach(e => {\r\n        const d = e.split(\"\\r\\n\")[0].split(\"=\");\r\n        if(d.length === 1) arr.push(d[0]);\r\n        else if(d.length === 2) arr.push(d[1]);\r\n    });\r\n    return arr;\r\n}\r\n\r\n\r\nexport default {\r\n    downAjax\r\n};","import React from \"react\";\r\n\r\nconst context = React.createContext();\r\n\r\nexport default context;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"./index.css\";\r\nimport tool from \"./tool\";\r\nimport context from \"../../context\";\r\n\r\n\r\nfunction Search () {\r\n    const [value, setValue] = useState(\"\");\r\n    const [down, setDown] = useState([]);\r\n    const [downBoo, setDownBoo] = useState(false);\r\n    const contextData = useContext(context);\r\n\r\n    useEffect( () => {\r\n        window.onclick = () => {\r\n            setDownBoo(false);\r\n        }\r\n    }, [] )\r\n\r\n    return <div className=\"search\" onClick={ (e) => {\r\n        e.stopPropagation();\r\n    } }>\r\n        <div className=\"int\">\r\n            <input onChange={ (e) => {\r\n                setValue(e.target.value);\r\n                setDownBoo(true);\r\n                // 申请关键字数据\r\n                tool.downAjax( value, (arr) => {\r\n                    setDown(arr);\r\n                } )\r\n            } } onClick={ () => {\r\n                setDownBoo(true);\r\n            } } value={value}></input>\r\n            <div className=\"btn\">搜索</div>\r\n        </div>\r\n        <ul className=\"down\" onClick={ () => {\r\n            setDownBoo(false);\r\n        } } style={ {display: value && downBoo ? \"block\": \"none\"} }>\r\n            { forKey(down, setValue, contextData) }\r\n        </ul>\r\n    </div>\r\n}\r\n\r\n// 根据数据，渲染出对应的组件信息\r\nfunction forKey(arr, setValue, context) {\r\n    return arr.map( (k, i) => {\r\n        return <li key={i} onClick={ () => {\r\n            setValue(k);\r\n            console.log(context)\r\n            context.playBoo && context.playBoo( false );\r\n            setTimeout( () => {\r\n                context.singerId && context.singerId( null );\r\n                context.inputKey && context.inputKey( k );\r\n            } )\r\n        } }>{k}</li>\r\n    } )\r\n}\r\n\r\nexport default Search;","import React, { useEffect, useState } from \"react\";\r\nimport \"./index.css\";\r\n\r\n\r\nfunction Footer (props) {\r\n    const [footer, setFooter] = useState([]);\r\n\r\n    useEffect( () => {\r\n        setFooter( chuLi(props.zong, props.index) );\r\n    }, [props.zong, props.index] )\r\n    \r\n\r\n    if(props.index > props.zong) {\r\n        props.callBack(1);\r\n    }\r\n    return <div className=\"footer\">\r\n        <div className=\"footer_content\">\r\n            {\r\n                forKey(footer, props.index, props.zong, props.callBack)\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nfunction chuLi(zong, index) {\r\n    if(!zong || !index) return [];\r\n\r\n    let arr = [\"<\"];\r\n    if(zong <= 7) {\r\n        for(let i = 1; i <= zong; i ++) {\r\n            arr.push(i);\r\n        }\r\n    }\r\n    else if(zong > 7 && index <= 5) {\r\n        arr = [\"<\", 1, 2, 3, 4, 5, \"···\", zong]\r\n    }\r\n    else if(zong > 7 && index >= zong - 4) {\r\n        arr = [\"<\", 1, \"···\", zong-4, zong-3, zong-2, zong-1, zong]\r\n    }\r\n    else arr = [\"<\", 1, \"···\", index-1, index, index+1, \"···\", zong];\r\n\r\n    arr.push(\">\");\r\n    return arr;\r\n}\r\n\r\nfunction forKey(arr, index, zong, callBack) {\r\n    return arr.map((k, i) => {\r\n        return <span onClick={ () => {\r\n            if(k === \"<\" && index > 1) callBack(index - 1);\r\n            else if(k === \">\" && index < zong) callBack(index + 1);\r\n            else if( k !== \"···\" ) callBack(k);\r\n        } } key={i} className={k == index ? \"active\" : \"\"}>{k}</span>\r\n    })\r\n}\r\n\r\n// 1234567\r\n// 12345*n\r\n// 1*567*n\r\n// 1*n-4n-3n-2n-1n\r\n\r\nexport default Footer;","import tool from \"../../tool\";\r\n\r\nfunction singerAjax(index, setFootetZ, setSinger, ref) {\r\n    const z = 30;\r\n    tool.ajax(tool.url + `/kuwo/api/www/artist/artistInfo?category=0&pn=${index}&rn=${z}`)\r\n    .then((k) => {\r\n        // 滚动条复位\r\n        ref.current && (ref.current.scrollTop = 0);\r\n        \r\n        const data = JSON.parse(k).data;\r\n        let zong = parseInt(data.total / z);\r\n        if( zong * z < data.total) zong += 1;\r\n        setFootetZ(zong);\r\n        setSinger(data.artistList);\r\n    })\r\n}\r\n\r\nexport default {\r\n    singerAjax\r\n}","import React, {useState, useEffect, useRef, useContext} from \"react\";\r\nimport Footer from \"../Footer\";\r\n\r\nimport \"./index.css\";\r\nimport tool from \"./tool\";\r\nimport context from \"../../context\";\r\n\r\nfunction Singer () {\r\n    const [footerI, setFootetI] = useState(1);\r\n    const [footerZ, setFootetZ] = useState(1);\r\n    const [singer, setSinger] = useState([]);\r\n    const ref = useRef();\r\n    const contextData = useContext(context);\r\n    \r\n    useEffect( () => {\r\n        // 申请歌手数据\r\n        tool.singerAjax(footerI, setFootetZ, setSinger, ref);\r\n    }, [footerI])\r\n\r\n    return <div className=\"singer\">\r\n        <div className=\"singer_content\" ref={ref}>\r\n            {forKey(singer, contextData)}\r\n        </div>\r\n        <div className=\"singer_footer\">\r\n            <Footer zong={footerZ} index={footerI} callBack={ (index) => {\r\n                setFootetI(index);\r\n            } }></Footer>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nfunction forKey(arr, contextData) {\r\n    return arr.map( (k) => {\r\n        return <div className=\"singer_d\" key={k.id} onClick={ () => {\r\n            contextData.playBoo && contextData.playBoo( false );\r\n            setTimeout( () => {\r\n                contextData.singerId && contextData.singerId( k.id );\r\n                contextData.inputKey && contextData.inputKey( null );\r\n            } )\r\n        } }>\r\n            <img src={k.pic70} />\r\n            <div>{k.name}</div>\r\n        </div>\r\n    } )\r\n}\r\n\r\nexport default Singer;","import tool from \"../../tool\";\r\n\r\nfunction informationAjax(singerId, inputKey, footerI, setMusicList, setFootetZ, ref) {\r\n    let url = tool.url + \"/kuwo/api/www\";\r\n    if(!inputKey) {\r\n        url += `/artist/artistMusic?artistid=${singerId}&pn=${footerI}&rn=30`\r\n    }\r\n    else if(!singerId) {\r\n        url += `/search/searchMusicBykeyWord?key=${inputKey}&pn=${footerI}&rn=30`\r\n    }\r\n\r\n    tool.ajax(url)\r\n    .then( (k) => {\r\n        // 滚动条复位\r\n        ref.current && (ref.current.scrollTop = 0);\r\n\r\n        const data = JSON.parse(k).data;\r\n        setMusicList(data.list);\r\n\r\n        let zong = parseInt(data.total / 30);\r\n        if( zong * 30 < data.total) zong += 1;\r\n        setFootetZ(zong);\r\n    } )\r\n}\r\n\r\nexport default {\r\n    informationAjax\r\n}","import React, { useContext, useState, useEffect, useRef } from \"react\";\r\nimport Footer from \"../Footer\";\r\n\r\nimport \"./index.css\";\r\n\r\nimport tool from \"./tool\";\r\nimport context from \"../../context\";\r\n\r\n// \r\n// http://www.kuwo.cn/api/www/\r\nfunction Information() {\r\n    const contextData = useContext(context);\r\n    const [singerId, setSingerId] = useState(null);\r\n    const [inputKey, setInputKey] = useState(null);\r\n    \r\n    // 分页相关的数据\r\n    const [footerI, setFootetI] = useState(1);\r\n    const [footerZ, setFootetZ] = useState(1);\r\n    \r\n    // 向执行期上下文中添加引发该组件重新渲染的方法\r\n    useEffect( () => {\r\n        contextData.singerId = setSingerId;\r\n        contextData.inputKey = setInputKey;\r\n    }, [] )\r\n\r\n    // 对应的歌曲数据\r\n    const [musicList, setMusicList] = useState([]);\r\n    const ref = useRef();\r\n\r\n    // 获取对应的歌曲数据\r\n    useEffect( () => {\r\n        if( !singerId && !inputKey ) return;\r\n        tool.informationAjax(singerId, inputKey, footerI, setMusicList, setFootetZ, ref);\r\n    }, [singerId, footerI, inputKey] )\r\n\r\n    return <div className=\"information\">\r\n        <div className=\"information_content\" ref={ref}>\r\n            {forKey(musicList, contextData, footerI)}\r\n        </div>\r\n        <div className=\"information_footer\">\r\n            <Footer zong={footerZ} index={footerI} callBack={ (index) => {\r\n                setFootetI(index);\r\n            } }></Footer>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nfunction forKey(arr, context, footerI) {\r\n    return arr.map( (k, i) => {\r\n        return <div className=\"content\" key={i} onClick={ () => {\r\n            context.playBoo(true);\r\n            setTimeout( () => {\r\n                context.musicId(k.rid);\r\n            } )\r\n        } }>\r\n            <div className=\"list\">{i + 1 + (footerI - 1) * 30}</div>\r\n            <img src={k.pic}></img>\r\n            <div className=\"musicName\">{k.name}</div>\r\n            <div className=\"name\">{k.artist}</div>\r\n        </div>\r\n    } )\r\n}\r\n\r\nexport default Information;","import tool from \"../../tool\";\r\n\r\nfunction lrcAjax(musicId, setLrc) {\r\n    const url = tool.url + `/kuwo/newh5/singles/songinfoandlrc?musicId=${musicId}`;\r\n    tool.ajax(url)\r\n    .then( (k) => {\r\n        const d = JSON.parse(k).data.lrclist;\r\n        setLrc(d);\r\n    } )\r\n}\r\n\r\nexport default {lrcAjax};","import React, { useState, useEffect } from \"react\";\r\nimport \"./index.css\";\r\nimport tool from \"./tool\";\r\n\r\n\r\nfunction Lrc(props) {\r\n    // 歌词数据\r\n    const [lrc, setLrc] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if(!props.musicId) return;\r\n        tool.lrcAjax(props.musicId, setLrc);\r\n    }, [props.musicId])\r\n    // 计算歌词位置\r\n    const i = getIndex(lrc, props.time);\r\n    \r\n    return <div className=\"lrc\">\r\n        <div className=\"content\" style={{marginTop: styTop(i)}}>\r\n            {forKey(lrc, i)}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nfunction forKey(arr, index) {\r\n    return arr.map((k, i) => {\r\n        return <div key={i} style={ {color: i === index ? \"#f0f\" : \"#666\"} }>{k.lineLyric}</div>\r\n    })\r\n}\r\n\r\nfunction getIndex(arr, time) {\r\n    if(arr.length === 0) return 0;\r\n    for(let i = 0; i < arr.length; i ++) {\r\n        if( styColor(i, arr, time) ) return i;\r\n    }\r\n}\r\n\r\nfunction styColor(index, arr, time) {\r\n    if(time === 0 && index === 0) return true;\r\n    const t = arr[index].time;\r\n    if(index === arr.length - 1 && t <= time) return true;\r\n    else if(index === arr.length - 1) return false;\r\n    const _t = arr[index + 1].time;\r\n    if( t <= time && _t > time) return true;\r\n    return false;\r\n} \r\n\r\nfunction styTop(i) {\r\n    if(i <= 2) return \"-0px\";\r\n    return -(i - 2) * 30 + \"px\";\r\n}\r\n\r\nexport default Lrc;","import React, { useEffect } from \"react\";\r\nimport \"./index.css\";\r\n\r\n\r\nlet touWei = [];\r\nlet dom = [];\r\nlet terval = null;\r\nlet _k = [];\r\nconst color = [\"#990033\", \"#CC6699\", \"#FF6699\", \"#FF3366\", \"#993366\", \r\n               \"#CC0066\", \"#CC0033\", \"#FF0066\", \"#FF0033\", \"#CC3399\",\r\n               \"#FF3399\", \"#FF9999\", \"#FF99CC\", \"#FF0099\", \"#CC3366\",\r\n               \"#FF66CC\", \"#FF33CC\", \"#FFCCFF\", \"#FF99FF\", \"#FF00CC\",\r\n               \"#FF66FF\", \"#CC33CC\", \"#CC00FF\", \"#FF33FF\", \"#CC99FF\",\r\n               \"#9900CC\", \"#FF00FF\", \"#CC66FF\", \"#990099\", \"#CC0099\",\r\n               \"#CC33FF\", \"#CC99CC\",\r\n               \"#990033\", \"#CC6699\", \"#FF6699\", \"#FF3366\", \"#993366\", \r\n               \"#CC0066\", \"#CC0033\", \"#FF0066\", \"#FF0033\", \"#CC3399\",\r\n               \"#FF3399\", \"#FF9999\", \"#FF99CC\", \"#FF0099\", \"#CC3366\",\r\n               \"#FF66CC\", \"#FF33CC\", \"#FFCCFF\", \"#FF99FF\", \"#FF00CC\",\r\n               \"#FF66FF\", \"#CC33CC\", \"#CC00FF\", \"#FF33FF\", \"#CC99FF\",\r\n               \"#9900CC\", \"#FF00FF\", \"#CC66FF\", \"#990099\", \"#CC0099\",\r\n               \"#CC33FF\", \"#CC99CC\"]\r\n\r\nfunction Frequency(props) {\r\n    \r\n    useEffect(() => {\r\n        dom = document.querySelectorAll(\".tou\");\r\n    })\r\n\r\n    useEffect(() => {\r\n        touWei = [];\r\n        touWei.fill(0);\r\n        _k = [];\r\n        terval = setInterval(() => {\r\n            for(let i = 0; i < touWei.length; i ++) {\r\n                if(!touWei[i]) return;\r\n                let w = touWei[i] - 2;\r\n                touWei[i] = w;\r\n            }\r\n        }, 20);\r\n\r\n        return () => {\r\n            clearInterval(terval);\r\n        }\r\n    }, [])\r\n    \r\n    const frequency = props.frequency;\r\n    const a = [];\r\n    for(let i = 0; i < frequency.length; i ++) {\r\n        if(frequency[i] === 0) {\r\n            a.push(parseInt(Math.random() * 10) + 3 )\r\n        }else {\r\n            a.push(frequency[i]);\r\n        }\r\n    }\r\n    const arr = forKey(a);\r\n\r\n    return <div className=\"frequency\">\r\n        {arr}\r\n    </div>\r\n}\r\n\r\nfunction forKey(arr) {\r\n    return arr.map((k, i) => {\r\n        return <div className=\"fre_content\" key={i}>\r\n            <div className=\"tou\" style={ styTou(k, i) }></div>\r\n            <div className=\"zhu\" style={ {height: k + \"px\", background: color[i]} }></div>\r\n        </div>\r\n    })\r\n}\r\n\r\nfunction styTou(k, i) {\r\n    let m = touWei[i];\r\n    let x = 0;\r\n    let t = 0;\r\n    if(!m || m < k) {\r\n        // if(_k[i]) {\r\n        //     // 算出tou与zhu的距离差\r\n        //     x = touWei[i] - _k[i];\r\n        //     // 算出tou下降，zhu上升，多长时间进行重合\r\n        //     t = (10 + (k - _k[i]) / 100) * x;\r\n        //     // 减少误差，把时间稍微减少一点\r\n        //     t -= 40;\r\n        //     if(t < 0) t = 0;\r\n        // }\r\n        // // 重合后改变位置\r\n        // setTimeout(() => {\r\n        //     m = k * 1.1;\r\n        //     if(m >= 297) m = 297;\r\n        //     touWei[i] = m;\r\n        //     dom[i].style.bottom = m + \"px\";\r\n        // }, t)\r\n        m = k * 1.1;\r\n        if(m >= 297) m = 297;\r\n        touWei[i] = m;\r\n    }\r\n\r\n    _k[i] = k;\r\n\r\n    return {\r\n        background: color[color.length - 1 - i],\r\n        bottom: m + \"px\"\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Frequency;","import tool from \"../../tool\";\r\n\r\nfunction musicAjax(musicId, setMusicXin, setMusicSrc) {\r\n    let musicXin = null;\r\n    let musicSrc = null;\r\n    return new Promise((res) => {\r\n        const url = tool.url + `/kuwo/api/www/music/musicInfo?mid=${musicId}`;\r\n        tool.ajax(url)\r\n        .then( (k) => {\r\n            musicXin = JSON.parse(k).data;\r\n        } )\r\n        // 申请歌曲路径\r\n        .then( () => {\r\n            const url = tool.url + `/kuwo/url?format=mp3&rid=${musicXin.rid}&response=url&type=convert_url3&br=128kmp3&from=web`;\r\n            return tool.ajax(url)\r\n        } )\r\n        .then( (k) => {\r\n            musicSrc = JSON.parse(k).url;\r\n        } )\r\n        // 引发重新渲染\r\n        .then( () => {\r\n            setMusicXin(musicXin);\r\n            setMusicSrc(musicSrc);\r\n            res(musicSrc);\r\n        } )\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * musicUrl 音乐路径\r\n * callBack 音乐播放时的回调函数\r\n * stopCall 音乐播放停止的回调函数\r\n * boo      是否加载完立即播放音乐\r\n */\r\nfunction music(musicUrl, callBack, jiaCall, stopCall, boo) {\r\n    // 保存执行期上下文\r\n    let audioContext = null;\r\n    // 保存音乐暂存区\r\n    let source = null;\r\n    // 保存分析器(分析频谱)\r\n    let analyser = null;\r\n    // 保存当前音乐是否已经处于播放阶段\r\n    let playBoo = false;\r\n    // 保存申请下来的音乐数据\r\n    let bufferData = null;\r\n    // 保存频谱\r\n    let frequency = [];\r\n\r\n    // 保存音乐播放过程中的定时器\r\n    let terval = null;\r\n    // 保存音乐前进的时间\r\n    let time = 0;\r\n    // 保存音乐是否加载完成\r\n    let jiaZaiBoo = false;\r\n\r\n    \r\n    // 申请音乐数据\r\n    function ajaxMusic(url) {\r\n        jiaZaiBoo = false;\r\n        tool.ajax(url, {\r\n            responseType: 'arraybuffer'\r\n        }).then((data) => {\r\n            // 构建播放环境\r\n            createHuan();\r\n            // 解码音频文件\r\n            audioContext.decodeAudioData(data, function(buffer) {\r\n                bufferData = buffer;\r\n                source.buffer = bufferData;\r\n                // 标记音乐已经加载完成\r\n                jiaZaiBoo = true;\r\n                // 音乐加载完成的回调函数\r\n                jiaCall();\r\n                // 加载完成立即播放音乐\r\n                if(boo) play();\r\n            }, function (e) {\r\n                console.log(e.err);\r\n            });\r\n        })\r\n    }\r\n\r\n    // 构建环境\r\n    function createHuan() {\r\n        // 创建执行期上下文\r\n        createAudioContext();\r\n        // 创建暂存区，暂存音乐数据(重要步骤)\r\n        createSource();\r\n        // 创建分析器\r\n        createAnalyser();\r\n        // 暂存区音乐与分析器以及喇叭关联起来，分析音频\r\n        analyserSource();\r\n    }\r\n    // 创建执行期上下文\r\n    function createAudioContext() {\r\n        const AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext;\r\n        audioContext = new AudioContext();\r\n    }\r\n    // 创建暂存区，暂存音乐数据(重要步骤)\r\n    function createSource() {\r\n        source = audioContext.createBufferSource();\r\n    }\r\n    // 创建分析器\r\n    function createAnalyser() {\r\n        analyser = audioContext.createAnalyser();\r\n        // analyser.smoothingTimeConstant = 0.85;\r\n        analyser.smoothingTimeConstant = 0.1;\r\n        analyser.fftSize = 64;//傅里叶变换参数 简化成16个元素数组\r\n    }\r\n    // 暂存区音乐与分析器以及喇叭关联起来，分析音频\r\n    function analyserSource() {\r\n        //将source与分析器连接\r\n        source.connect(analyser);\r\n        // 将分析器与destination连接，这样才能形成到达扬声器的通路\r\n        analyser.connect(audioContext.destination);\r\n        frequency = new Uint8Array(analyser.frequencyBinCount);\r\n    }\r\n\r\n    // 音乐播放函数\r\n    function play() {\r\n        if(!jiaZaiBoo) return;\r\n        // 初始时播放，对数据进行处理\r\n        if( !playBoo ) {\r\n            // 创建完执行期上下文，时间就开始计时\r\n            // 去除加载歌曲的时间，等待播放的时间\r\n            time = -audioContext.currentTime;\r\n            // 音乐开始播放\r\n            source.start(0);\r\n            playBoo = true;\r\n        }\r\n        else {\r\n            // 由暂停状态下进行播放\r\n            audioContext.resume();\r\n        }\r\n        kaiTerval();\r\n    }\r\n    // 音乐暂停函数\r\n    function suspend() {\r\n        if(!jiaZaiBoo) return;\r\n        audioContext.suspend();\r\n        clearInterval(terval);\r\n    }\r\n    // 开启音乐播放过程中的定时器\r\n    function kaiTerval() {\r\n        terval = setInterval( () => {\r\n            // 分析当前的频谱\r\n            analyser.getByteFrequencyData(frequency);\r\n            if (source.buffer){\r\n                // 音乐播放完成的处理\r\n                if (audioContext.currentTime + time > source.buffer.duration){\r\n                    // stop();\r\n                    time = -audioContext.currentTime;\r\n                    weiZhi(0);\r\n                }\r\n                // 回调歌曲播放过程中的回调函数\r\n                callBack(frequency, audioContext.currentTime + time, source.buffer.duration);\r\n            }\r\n        }, 100 )\r\n    }\r\n    // 音乐停止函数\r\n    function stop() {\r\n        source.stop(0);\r\n        playBoo = false;\r\n        clearInterval(terval);\r\n        stopCall && stopCall();\r\n    }\r\n    \r\n    // 设置音乐的播放位置\r\n    function weiZhi(wei) {\r\n        source.stop(0);\r\n        source = audioContext.createBufferSource();\r\n        source.buffer = bufferData;\r\n        // source.connect(that.gainNode); \r\n        //将source与分析器连接\r\n        source.connect(analyser);\r\n\r\n        source.start(0, wei);\r\n        time += wei;\r\n    }\r\n\r\n    // 主函数\r\n    function __main() {\r\n        ajaxMusic(musicUrl);\r\n    }\r\n    __main();\r\n\r\n    return {\r\n        play,\r\n        suspend,\r\n        stop\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default {\r\n    musicAjax,\r\n    music\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Lrc from \"../Lrc\";\r\nimport Frequency from \"../Frequency\";\r\n\r\nimport \"./index.css\";\r\n\r\nimport context from \"../../context\";\r\nimport tool from \"./tool\";\r\n\r\nlet music = null;\r\n\r\nfunction Play() {\r\n    const [musicId, setMusicId] = useState(null);\r\n    const [musicXin, setMusicXin] = useState({});\r\n    const [, setMusicSrc] = useState(null);\r\n    // 歌曲加载完成的标志\r\n    const [musicBiao, setMusicBiao] = useState(false);\r\n    // 歌曲播放的状态\r\n    const [musicBoo, setMusicBoo] = useState(false);\r\n\r\n    // 当前歌曲播放的时间\r\n    const [time, setTime] = useState(0);\r\n    // 当前歌曲频谱\r\n    const [frequency, setFrequency] = useState([]);\r\n\r\n    const contextData = useContext(context);\r\n    useEffect(() => {\r\n        contextData.musicId = setMusicId;\r\n    }, [])\r\n    \r\n    useEffect( () => {\r\n        if(musicId) {\r\n            // 申请歌曲数据\r\n            getMusicData(musicId, setMusicXin, setMusicSrc)\r\n            // 申请歌曲\r\n            .then( (url) => {\r\n                getMusic(url, musicBoo, setMusicBiao, setTime, setFrequency)\r\n            } );\r\n        }\r\n        return () => {\r\n            clear();\r\n        }\r\n    }, [musicId])\r\n    \r\n    \r\n    return <div className=\"play\">\r\n        <div className=\"btn\" onClick={ () => {\r\n            play(musicBoo, musicBiao, setMusicBoo);\r\n        } }>\r\n            {!musicBiao && \"音乐加载中，禁止操作\"}\r\n            {musicBiao && !musicBoo && \"播放音乐\"}\r\n            {musicBiao && musicBoo && \"暂停音乐\"}\r\n        </div>\r\n        <Frequency frequency={frequency}></Frequency>\r\n        <Lrc musicId={musicXin.rid} time={time}></Lrc>\r\n    </div>\r\n}\r\n\r\n\r\n//申请歌曲数据\r\nfunction getMusicData(musicId, setMusicXin, setMusicSrc) {\r\n    return new Promise((res, rej) => {\r\n        music = null;\r\n        tool.musicAjax(musicId, setMusicXin, setMusicSrc)\r\n        .then((url) => {\r\n            res(url);\r\n        });\r\n    })\r\n}\r\n\r\n// 申请歌曲\r\nfunction getMusic(url, musicBoo, setMusicBiao, setTime, setFrequency) {\r\n    music = tool.music(\"/musicPlay/kuwo?url=\" + url, (frequency, time, duration) => {\r\n        setTime(time); \r\n        setFrequency(frequency);\r\n    }, () => {\r\n        setMusicBiao(true);\r\n    }, () => {\r\n        // 可以进行下一曲的操作\r\n        console.log(\"音乐播放结束\");\r\n    }, musicBoo);\r\n}\r\n\r\n// 歌曲播放的处理\r\nfunction play(musicBoo, musicBiao, setMusicBoo) {\r\n    if(!music || !musicBiao) return;\r\n    if( !musicBoo ) {\r\n        setMusicBoo(true);\r\n        music.play();\r\n    }\r\n    else {\r\n        setMusicBoo(false);\r\n        music.suspend();\r\n    }\r\n}\r\n\r\n// 组件销毁执行的函数\r\nfunction clear() {\r\n    music && music.stop();\r\n}\r\n\r\nexport default Play;","import React, { useState, useEffect } from \"react\";\r\nimport Search from \"./component/Search\";\r\nimport Singer from \"./component/Singer\";\r\nimport Information from \"./component/Information\";\r\nimport Play from \"./component/Play\";\r\n\r\nimport context from \"./context\";\r\n\r\nconst obj = {\r\n    inputKey: null,\r\n    singerId: null,\r\n    musicId: null,\r\n    playBoo: null\r\n} \r\n\r\nfunction App () {\r\n    const [playBoo, setPlayBoo] = useState(false);\r\n    // 向执行期上下文中添加引发该组件重新渲染的方法\r\n    useEffect( () => {\r\n        obj.playBoo = setPlayBoo;\r\n    }, [])\r\n    \r\n    return <context.Provider value={ obj }>\r\n        <div className=\"app_content\">\r\n            <Search></Search>\r\n            <div className=\"infor\"> \r\n                <Singer></Singer>\r\n                { !playBoo && <Information></Information> }\r\n                { playBoo && <Play></Play> }\r\n            </div>\r\n        </div>\r\n    </context.Provider>\r\n}\r\n\r\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\nimport \"./index.css\";\n\n\nReactDOM.render(<App />, document.querySelector(\"#app\"));\n"],"sourceRoot":""}