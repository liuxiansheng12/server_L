(this.webpackJsonpkuwo_yi_dong=this.webpackJsonpkuwo_yi_dong||[]).push([[0],{23:function(e,t,a){e.exports=a(41)},28:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(19),c=a.n(i),r=a(9),l=a(10),o=a(4),u=a(5),m=a(7),h=a(6),p=(a(28),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={ye:[]},e.click=function(t){if("\xb7\xb7\xb7"!=t)if("<"==t){if(1==e.props.pn)return;e.props.callBack(e.props.pn-1)}else if(">"==t){if(e.props.pn==e.props.totle)return;e.props.callBack(e.props.pn+1)}else e.props.callBack(t)},e.fenYeData=function(){var t=e.props.pn,a=e.props.totle,n=[];if(1==a)e.setState({ye:[]});else if(a<=5)for(var s=1;s<=a;s++)n.push(s);else t<=3?((n=[1,2,3]).push("\xb7\xb7\xb7"),n.push(a)):4==t?((n=[1,2,3,4]).push("\xb7\xb7\xb7"),n.push(a)):t==a-3?((n=[a-3,a-2,a-1,a]).unshift(1),n.unshift("\xb7\xb7\xb7")):t>=a-2?((n=[a-2,a-1,a]).unshift(1),n.unshift("\xb7\xb7\xb7")):n=[1,"\xb7\xb7\xb7",t-1,t,t+1,"\xb7\xb7\xb7",a];n.unshift("<"),n.push(">"),e.state.ye=n},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return this.fenYeData(),s.a.createElement("div",{className:"fenYe_content"},this.state.ye.map((function(t,a){return s.a.createElement("span",{className:e.props.pn==t&&"active",onTouchStart:e.click.bind(e,t)},t)})))}},{key:"shouldComponentUpdate",value:function(e){for(var t in e)if(this.props[t]!=e[t])return!0;return!1}}]),a}(s.a.Component)),v=a(14),f=a.n(v),d=a(20);function g(){return(g=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y={ajax:function(e){return g.apply(this,arguments)},urlFen:function(e){for(var t=e.substr(1).split("&"),a={},n=0;n<t.length;n++){var s=t[n].split("=");a[s[0]]=s[1]}return a}},E=(a(30),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={key:"",musicList:[],musicListBoo:!1,totle:2e3,pn:1,rn:30},e.fenYeCallBack=function(t){e.state.pn=t,e.getMusicList(),e.setState({pn:t})},e.getMusicList=function(){var t=e.state.key,a=e.state.pn,n=e.state.rn;e.setState({musicListBoo:!1}),y.ajax("/kuwo/api/www/search/searchMusicBykeyWord?key=".concat(t,"&pn=").concat(a,"&rn=").concat(n)).then((function(t){var a=t.data.list,s=parseInt(t.data.total/n);s*n<t.data.total&&(s+=1),e.setState({musicList:a,totle:s,musicListBoo:!0})}))},e.xuanMusicList=function(){var t=e.state.musicList;if(0!==t.length)return t.map((function(t,a){return s.a.createElement(r.b,{to:"/kuwoYiDong/musicPlay/".concat(t.rid)},s.a.createElement("ul",{key:t.rid},s.a.createElement("li",{className:"num"},a+(e.state.pn-1)*e.state.rn),s.a.createElement("li",{className:"daDian name"},t.hasmv>0&&s.a.createElement(r.b,{to:"/kuwoYiDong/mvPlay/".concat(t.rid),className:"mv"},"MV"),s.a.createElement("span",null,t.name)),s.a.createElement("li",{className:"daDian artist"},t.artist),s.a.createElement("li",{className:"daDian album"},t.album),s.a.createElement("li",{className:"daDian time"},t.songTimeMinutes)))}))},e}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"searchList"},s.a.createElement("div",{className:"musicList"},s.a.createElement("div",{className:"musicList_title"},s.a.createElement("ul",null,s.a.createElement("li",{className:"num"},"\u5e8f\u53f7"),s.a.createElement("li",{className:"name"},"\u6b4c\u66f2"),s.a.createElement("li",{className:"artist"},"\u6b4c\u624b"),s.a.createElement("li",{className:"album"},"\u4e13\u8f91"),s.a.createElement("li",{className:"time"},"\u65f6\u957f"))),s.a.createElement("div",{className:"musicList_content"},this.xuanMusicList())),s.a.createElement("div",{className:"fenYe"},s.a.createElement(p,{totle:this.state.totle,pn:this.state.pn,callBack:this.fenYeCallBack})))}},{key:"componentDidMount",value:function(){var e=this;this.props.history.listen((function(t){var a=y.urlFen(t.search);e.state.key=a.key,e.getMusicList()}));var t=y.urlFen(this.props.location.search);this.state.key=t.key,this.getMusicList()}},{key:"shouldComponentUpdate",value:function(e,t){for(var a in e)if(this.props[a]!=e[a])return!0;for(var n in t)if(this.state[n]!=t[n])return!0;return!1}}]),a}(s.a.Component)),k=(a(36),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={hearSearch:["a","b"],hearSearchBoo:!1,value:""},e.inpClick=function(t){var a=!e.state.hearSearchBoo;e.setState({hearSearchBoo:a}),t.stopPropagation()},e.inp=function(t){var a=t.target.value;e.setState({value:a,hearSearchBoo:!0}),y.ajax("/kuwo/api/www/search/searchKey?key=".concat(a)).then((function(t){for(var a=t.data,n=[],s=0;s<a.length;s++){var i=a[s].split("\n")[0];"string"!==typeof(i=i.split("=")[1])&&(i=""),n.push(i.trim())}e.setState({hearSearch:n})}))},e.setReSou=function(){y.ajax("/kuwo/api/www/search/searchKey?key=").then((function(t){e.setState({hearSearch:t.data})}))},e}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"search"},s.a.createElement("div",{className:"input"},s.a.createElement("div",{className:"content-inp"},s.a.createElement("input",{onClick:this.inpClick,onInput:this.inp}),this.state.hearSearchBoo&&!this.state.value&&w.call(this),this.state.hearSearchBoo&&this.state.value&&j.call(this))),s.a.createElement("div",{className:"searchJieGuo"},s.a.createElement("p",{className:"title"},"\u641c\u7d22\u7ed3\u679c"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(r.b,{to:"/kuwoYiDong/search/list?key=".concat("111")},"\u5355\u66f2")),s.a.createElement("li",null,s.a.createElement(r.b,{to:"/kuwoYiDong/search/mv?key=".concat("111")},"MV")))),s.a.createElement("div",{className:"route"},s.a.createElement(l.d,null,s.a.createElement(l.b,{path:"/kuwoYiDong/search/list",component:E}))))}},{key:"componentDidMount",value:function(){var e=this;console.log(111),window.onclick=function(){var t=!e.state.hearSearchBoo;e.setState({hearSearchBoo:t})},this.setReSou()}}]),a}(s.a.Component));function w(){return s.a.createElement("div",{className:"hearSearch"},s.a.createElement("p",{className:"title"},"\u6700\u8fd1\u641c\u7d22"),s.a.createElement("ul",null,S(this.state.hearSearch)))}function j(){return s.a.createElement("div",{className:"hearSearch"},s.a.createElement("ul",null,S(this.state.hearSearch)))}function S(e){return e.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(r.b,{to:"/kuwoYiDong/search/list?key=".concat(e)},e))}))}a(37);var N=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={musicData:{},lrc:[],musicUrl:"",playIndex:0,jinRef:s.a.createRef(),musicPlayBoo:!1,music:new Audio,dangTime:"00:00",jinDuChang:0,width:0,time:0,zong:0,terval:null},e.getMusicXin=function(t){y.ajax("/kuwo/api/www/music/musicInfo?mid=".concat(t)).then((function(t){e.setState({musicData:t.data},(function(){e.computedZhong()}))}))},e.getLrc=function(t){y.ajax("/kuwo/newh5/singles/songinfoandlrc?musicId=".concat(t)).then((function(t){e.setState({lrc:t.data.lrclist})}))},e.musicPlay=function(t){y.ajax("/kuwo/url?format=mp3&rid=".concat(t,"&response=url&type=convert_url3&br=128kmp3&from=web&t=1587030546976")).then((function(t){e.state.musicUrl=t.url,e.state.music.src=t.url}))},e.setLrc=function(){if(0!=e.state.lrc.length)return e.state.lrc.map((function(t,a){return s.a.createElement("div",{className:a==e.state.playIndex&&"active"},t.lineLyric)}))},e.play=function(){e.state.musicPlayBoo?(e.setState({musicPlayBoo:!1}),e.state.music.pause(),clearInterval(e.state.terval)):(e.setState({musicPlayBoo:!0}),e.state.music.play(),e.val())},e.val=function(){e.state.terval=setInterval((function(){var t=e.state.music.currentTime,a=e.dangTimeZhuan(t),n=e.computedWidth(t),s=e.state.playIndex;e.state.lrc[s+1]&&e.state.lrc[s+1].time<=t&&(s+=1),e.state.time==t&&Math.abs(t-e.state.zong)<1.5?(a="00:00",n=0,s=0,e.state.time=0,e.state.music.play()):e.state.time=t,e.setState({dangTime:a,width:n,playIndex:s})}),1e3/60)},e.computedZhong=function(){if(e.state.musicData&&e.state.musicData.songTimeMinutes){var t=e.state.musicData.songTimeMinutes.split(":");e.state.zong=parseInt(60*t[0])+parseInt(t[1])}else e.state.zhong=0},e.dangTimeZhuan=function(e){if(!e)return"00:00";var t=parseInt(e/60),a=parseInt(e-60*t);return t<10&&(t="0"+t),a<10&&(a="0"+a),t+":"+a},e.computedWidth=function(t){var a=t/e.state.zong;return parseInt(e.state.jinDuChang*a)},e}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{class:"musicPlay"},s.a.createElement("div",{className:"xinXi"},s.a.createElement("span",{class:"name"},this.state.musicData.name),"--",s.a.createElement("span",{class:"artist"},this.state.musicData.artist)),s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:this.state.musicData.albumpic})),s.a.createElement("div",{className:"zhuanJi"},s.a.createElement("span",null,"\u4e13\u8f91\uff1a"),s.a.createElement("span",{class:"tip daDian"},this.state.musicData.album),s.a.createElement("span",null,"\u53d1\u884c\u65f6\u95f4\uff1a"),s.a.createElement("span",{class:"zhuanJi_time daDian"},this.state.musicData.releaseDate)),s.a.createElement("div",{class:"lrc"},s.a.createElement("div",{className:"lrcContent",style:{marginTop:"-".concat(this.state.playIndex>=4?30*(this.state.playIndex-3):0,"px")}},this.setLrc())),s.a.createElement("div",{class:"time"},s.a.createElement("div",{className:"timeCon"},s.a.createElement("div",{className:"dang"},s.a.createElement("span",null,this.state.dangTime)),s.a.createElement("div",{className:"jin",ref:this.state.jinRef},s.a.createElement("div",{className:"t",style:{width:"".concat(this.state.width,"px")}}),s.a.createElement("div",{className:"dian",style:{left:"".concat(this.state.width,"px")}})),s.a.createElement("div",{className:"zong"},s.a.createElement("span",null,this.state.musicData.songTimeMinutes)))),s.a.createElement("div",{className:"caiDan"},!this.state.musicPlayBoo&&s.a.createElement("i",{className:"play-icon iconFont",onTouchStart:this.play}),this.state.musicPlayBoo&&s.a.createElement("i",{className:"pause-icon iconFont",onTouchStart:this.play})))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getMusicXin(e),this.getLrc(e),this.musicPlay(e),this.state.jinDuChang=parseInt(getComputedStyle(this.state.jinRef.current).width)}},{key:"componentWillUnmount",value:function(){this.state.music.pause(),clearInterval(this.state.terval)}}]),a}(s.a.Component),D=(a(38),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={mvRef:s.a.createRef(),jinRef:s.a.createRef(),quanPingRef:s.a.createRef(),videoSrc:null,playBoo:!1,dangTime:"00:00",zong:0,width:0,time:0,jinDuChang:0,jinDuWidth:0,terval:null,quanpingBoo:!1,kuaiJinTiShi:s.a.createRef()},e.playQie=function(){e.state.videoSrc&&(e.state.playBoo?(e.setState({playBoo:!1}),e.state.mvRef.current.pause(),clearInterval(e.state.terval)):(e.setState({playBoo:!0}),e.state.mvRef.current.play(),e.interval()))},e.chongXinPlay=function(){clearInterval(e.state.terval),e.state.time=0,e.state.zong=0,e.state.mvRef.current.pause(),e.setState({playBoo:!0,dangTime:"00:00",width:0}),e.state.mvRef.current.currentTime=0,e.state.mvRef.current.play(),e.interval()},e.interval=function(){e.state.terval=setInterval((function(){var t=e.state.mvRef.current.currentTime,a=e.dangTimeZhuan(t),n=e.computedWidth(t);e.computedZhong(),e.state.time==t&&Math.abs(t-e.state.zong)<1.5?(clearInterval(e.state.terval),e.chongXinPlay()):e.state.time=t,e.setState({dangTime:a,width:n})}),1e3/60)},e.dangTimeZhuan=function(e){if(!e)return"00:00";var t=parseInt(e/60),a=parseInt(e-60*t);return t<10&&(t="0"+t),a<10&&(a="0"+a),t+":"+a},e.computedWidth=function(t){var a=t/e.state.zong;return parseInt(e.state.jinDuChang*a)},e.computedZhong=function(){0!=e.state.zong&&e.state.zong||(e.state.zong=e.state.mvRef.current.duration)},e.quanping=function(){if(e.state.quanpingBoo){e.state.quanpingBoo=!1,e.state.quanPingRef.current.classList.remove("quanping"),e.state.jinDuChang=e.state.jinDuWidth;var t=e.computedWidth(e.state.time);e.setState({width:t})}else{e.state.quanpingBoo=!0,e.state.quanPingRef.current.classList.add("quanping"),e.state.jinDuChang=parseInt(getComputedStyle(e.state.jinRef.current).width);var a=e.computedWidth(e.state.time);e.setState({width:a})}},e.kuaijinToKuaiTui=function(){var t=0,a=0,n=0,s=0;e.state.mvRef.current.ontouchstart=function(e){t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY},e.state.mvRef.current.ontouchmove=function(i){n=i.changedTouches[0].clientX-t,s=i.changedTouches[0].clientY-a;var c=e.jiangTime(n,s);Math.abs(c-e.state.time)>4&&(e.state.kuaiJinTiShi.current.style.display="block",c>e.state.time?e.state.kuaiJinTiShi.current.innerHTML="\u5feb\u8fdb"+e.dangTimeZhuan(c):e.state.kuaiJinTiShi.current.innerHTML="\u5feb\u9000"+e.dangTimeZhuan(c)),i.preventDefault()},e.state.mvRef.current.ontouchend=function(i){n=i.changedTouches[0].clientX-t,s=i.changedTouches[0].clientY-a;var c=e.jiangTime(n,s);Math.abs(c-e.state.time)>4&&(e.state.kuaiJinTiShi.current.style.display="none",e.state.mvRef.current.currentTime=c)}},e.jiangTime=function(t,a){var n=null,s=e.state.time;if(n=e.state.quanpingBoo?Math.abs(a)/5/e.state.jinDuChang*e.state.zong:Math.abs(t)/5/e.state.jinDuChang*e.state.zong,t>10&&!e.state.quanpingBoo&&e.state.playBoo||a>10&&e.state.quanpingBoo&&e.state.playBoo){var i=e.state.time+n;i>e.state.zong&&(i=e.state.zong-10),s=i}else if(t<-10&&!e.state.quanpingBoo&&e.state.playBoo||a<-10&&e.state.quanpingBoo&&e.state.playBoo){var c=e.state.time-n;c<0&&(c=0),s=c}return s},e}return Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"mvPlay",ref:this.state.quanPingRef},s.a.createElement("div",{className:"video"},s.a.createElement("div",{className:"v"},s.a.createElement("video",{src:this.state.videoSrc,ref:this.state.mvRef}),s.a.createElement("div",{className:"menu"},s.a.createElement("div",{className:"chongXinPlay",onTouchStart:this.chongXinPlay},s.a.createElement("i",{className:"chongXiPlay-icon iconFont"})),s.a.createElement("div",{className:"col_c_p",onTouchStart:this.playQie},!this.state.playBoo&&s.a.createElement("i",{className:"iconFont play-icon"}),this.state.playBoo&&s.a.createElement("i",{className:"iconFont pause-icon"})),s.a.createElement("div",{className:"jinDu"},s.a.createElement("div",{className:"jin",ref:this.state.jinRef},s.a.createElement("div",{className:"time",style:{width:"".concat(this.state.width,"px")}}),s.a.createElement("div",{className:"dian",style:{left:"".concat(this.state.width,"px")}})),s.a.createElement("div",{className:"t"},s.a.createElement("span",null,this.state.dangTime),"/",s.a.createElement("span",null,this.dangTimeZhuan(this.state.zong)))),s.a.createElement("div",{className:"quanPing"},s.a.createElement("i",{className:"iconFont quanPing-icon",onTouchStart:this.quanping}))),s.a.createElement("div",{className:"kuaiJinTiShi",ref:this.state.kuaiJinTiShi}))))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,a="/kuwo/url?rid=".concat(t,"&response=url&format=mp4%7Cmkv&type=convert_url");y.ajax(a).then((function(t){e.setState({videoSrc:t.data})})),this.state.jinDuChang=parseInt(getComputedStyle(this.state.jinRef.current).width),this.state.jinDuWidth=this.state.jinDuChang,this.kuaijinToKuaiTui()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.terval),this.state.mvRef.current.pause()}}]),a}(s.a.Component)),T=(a(39),a(40),function(){return s.a.createElement(r.a,null,s.a.createElement("div",null,s.a.createElement(l.d,null,s.a.createElement(l.b,{path:"/kuwoYiDong/search",component:k}),s.a.createElement(l.b,{path:"/kuwoYiDong/musicPlay/:id",component:N}),s.a.createElement(l.b,{path:"/kuwoYiDong/mvPlay/:id",component:D}),s.a.createElement(l.a,{to:"/kuwoYiDong/search"}))))});c.a.render(s.a.createElement(T,null),document.querySelector("#app"))}},[[23,1,2]]]);
//# sourceMappingURL=main.50450b86.chunk.js.map